erDiagram
users {
uuid id PK
varchar clerk_id UK
varchar first_name
varchar last_name
varchar email
varchar phone
timestamp created_date
}

    google_business_profile {
        uuid id PK
        uuid user_id FK
        varchar google_account_id
        varchar account_email
        varchar account_name
        varchar status
        timestamp created_date
    }

    google_business_profile_locations {
        uuid id PK
        uuid google_business_profile_id FK
        varchar location_id
        varchar name
        text address
        varchar branch
        varchar status
        timestamp created_date
    }

    review_links {
        uuid id PK
        uuid location_id FK
        varchar slug UK
        boolean is_active
        varchar theme
        varchar primary_color
        varchar gradient_from
        varchar gradient_to
        varchar headline
        text subheadline
        boolean show_business_name
        boolean show_business_logo
        boolean show_business_address
        varchar positive_headline
        text positive_subheadline
        varchar positive_cta_text
        varchar positive_redirect_url
        varchar negative_headline
        text negative_subheadline
        varchar negative_cta_text
        varchar negative_redirect_url
        boolean show_feedback_form
        text feedback_placeholder
        integer min_rating_to_redirect
        varchar created_by
        timestamp created_date
        varchar modified_by
        timestamp modified_date
    }

    review_link_visits {
        uuid id PK
        uuid review_link_id FK
        varchar visitor_id
        varchar ip_address
        text user_agent
        varchar referrer
        varchar device_type
        varchar country
        varchar city
        timestamp visited_at
    }

    review_link_interactions {
        uuid id PK
        uuid review_link_id FK
        uuid visit_id FK
        integer rating
        varchar action_type
        varchar redirect_url
        timestamp created_at
    }

    review_link_feedback {
        uuid id PK
        uuid review_link_id FK
        uuid interaction_id FK
        integer rating
        text feedback_text
        varchar contact_email
        varchar contact_phone
        varchar status
        text internal_notes
        varchar resolved_by
        timestamp resolved_at
        timestamp created_at
    }

    review_link_daily_stats {
        uuid id PK
        uuid review_link_id FK
        date date
        integer total_visits
        integer unique_visitors
        integer total_ratings
        integer positive_ratings
        integer negative_ratings
        integer cta_clicks
        integer feedback_submitted
        integer rating_1_count
        integer rating_2_count
        integer rating_3_count
        integer rating_4_count
        integer rating_5_count
    }

    users ||--o{ google_business_profile : "has"
    google_business_profile ||--o{ google_business_profile_locations : "has"
    google_business_profile_locations ||--o{ review_links : "has"
    review_links ||--o{ review_link_visits : "tracks"
    review_links ||--o{ review_link_interactions : "records"
    review_links ||--o{ review_link_feedback : "collects"
    review_links ||--o{ review_link_daily_stats : "aggregates"
    review_link_visits ||--o{ review_link_interactions : "triggers"
    review_link_interactions ||--o| review_link_feedback : "may have"
